<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="mb-0">Exams List</h2>
    <a routerLink="/admin/exams/add" class="btn btn-primary">
      <i class="bi bi-plus-lg"></i> Add New Exam
    </a>
  </div>

  @if (isLoading) {
    <div class="text-center py-5">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
      <p class="mt-2">Loading exams...</p>
    </div>
  } @else if (error) {
    <div class="alert alert-danger">
      <p class="mb-2">{{ error }}</p>
      <button (click)="loadExams()" class="btn btn-sm btn-outline-danger">
        Retry
      </button>
    </div>
  } @else {
    @if (exams.length === 0) {
      <div class="alert alert-info">No exams found.</div>
    } @else {
      <div class="table-responsive">
        <table class="table table-striped table-hover">
          <thead class="table-dark">
            <tr>
              <th scope="col">ID</th>
              <th scope="col">Name</th>
              <th scope="col">Description</th>
              <th scope="col">Duration</th>
              <th scope="col">Actions</th>
            </tr>
          </thead>
          <tbody>
            @for (exam of exams; track exam.id) {
              <tr>
                <td>{{ exam.id }}</td>
                <td>{{ exam.title }}</td>
                <td>{{ exam.description }}</td>
                <td>{{ exam.durationMinutes }} minutes</td>
                <td>
                  <div class="d-flex gap-2">
                    <a
                      [routerLink]="['/admin/exams/edit', exam.id]"
                      class="btn btn-sm btn-outline-primary"
                    >
                      <i class="bi bi-pencil-square"></i> Edit
                    </a>
                    <button
                      (click)="deleteExam(exam.id)"
                      class="btn btn-sm btn-outline-danger"
                      [disabled]="deletingIds.has(exam.id)"
                    >
                      @if (deletingIds.has(exam.id)) {
                        <span
                          class="spinner-border spinner-border-sm"
                          aria-hidden="true"
                        ></span>
                        <span class="visually-hidden">Deleting...</span>
                      } @else {
                        <i class="bi bi-trash"></i> Delete
                      }
                    </button>
                  </div>
                </td>
              </tr>
            }
          </tbody>
        </table>
      </div>
    }
  }
</div>
